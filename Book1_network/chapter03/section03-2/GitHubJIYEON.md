- 03-2 IP주소
  ## 네트워크 주소와 호스트 주소
  네트워크 주소 = 네트워크 ID, 네트워크 식별자
  호스트 주소 = 호스트 ID, 호스트 식별자
  ⇒ IP주소에서 네트워크 주소와 호스트 주소를 구분하는 범위는 유동적일 수 있음
  **클래스란?**
  호스트 주소 공간을 크게 할당하면 호스트가 할당되지 않은 다수의 IP주소가 낭비될 수 있음
  무조건 호스트 주소 공간을 작게 할당하면 호스트가 사용할 IP주소가 부족해질 수 있음
  해결하기 위해 생겨난 개념 **IP주소의 클래스**
  ## 클래스풀 주소
  클래스 : 네트워크 크기에 따라 IP주소를 분류하는 기준
  클래스를 이용하면 필요한 호스트 IP개수에 따라 네트워크 크기를 가변적으로 조정해 네트워크 주소와 호스트 주소를 구획할 수 있음
  ## 클래스리스 주소 체계
  - 클래스풀 주소 체계보다 더 유동적이고 정교하게 네트워크를 구획할 수 있는 클래스리스 주소 체계가 등장함
  - 클래스 개념없이 클래스에 구애받지 않고 네트워크의 영역을 나누어서 호스트에게 IP주소 공간을 할당하는 방식
  - 오늘날 주로 사용되는 방식
  **서브넷 마스크**
  클래스플 주소 체계는 클래스를 이용해 네트워크 주소와 호스트 주소를 구분하지만 클래스리스 주소 체계는클래스를 이용하지 않으므로 IP주소상에서 네트워크 주소와 호스트 주소를 구분 짓는 지점은 임의의 지점이 될 수 있음 클래스리스 주소 체계에서는 네트워크와 호스트를 구분 짓는 수단으로 서브넷 마스크를 이용함
  서브넷 마스크를 이용해 클래스를 원하는 크기로 더 잘게 쪼개어 사용하는 것을 **서브네팅**
  **서브네팅: 비트 AND연산**
  서브넷 마스크를 이용해 네트워크 주소와 호스트 주소를 구분 짓는 방법은 단순
  IP주소와 서브넷 마스크를 비트 AND연산하면 됨
  비트 AND 연산 이란 피연산자가 모두 1인 경우에는 1, 아닌 경우에는 0이 되는 연산
  **정리**
  클래스리스 주소 체계는 클래스가 아니라 서브넷 마스크를 이용해 네트워크 주소와 호스트 주소를 구분하는 IP 주소 체계
  서브넷 마스크와 IP주소 간에 비트 AND연산을 수행하면 IP주소 내의 네트워크 주소를 알아낼 수 있음
  **서브넷 마스크 표기 : CIDR표기법**
  1. 서브넷 마스크를 ‘255.255.255.0.’ ‘255.255.255.252’ 처럼 10진수로 직접 표기하는 방법
  2. IP주소/서브넷 마스크상의 1의 개수 형식으로 표기하는 방법

## 공인 IP주소와 사설 IP주소

**공인 IP주소**

- 전 세계에서 고유한 IP주소
- 네트워크 간의 통신 인터넷을 이용할 때 사용하는 IP주소가 공인 IP주소
- 공인 IP주소는ISP나 공인 IP주소 할당 기관을 통해 할당 받을 수 있음

**사설 IP주소와 NAT**

- 사설 네트워크에서 사용하기 위한 IP주소
- 사설 네트워크란 인터넷, 외부 네트워크에 공개되지 않은 네트워크를 의미
- LAN내의 많은 호스트는 사설 IP주소를 사용하기 때문
- 사설IP 주소의 할당 주체는 일반적으로 라우터입니다.
- 사설 IP주소를 사용하는 호스트가 외부 네트워크와 통신 하려면? NAT 사용
  NAT 는 IP주소를 변환하는 기술

**NAT 기능**

1. 사설 네트워크상에서 만들어진 패킷 속 사설 IP 주소는 공유기를 거쳐 공인 IP변경
   외부 네트워크로 전송됨
2. 외부 네트워크로부터 받은 패킷 속 공인 IP주소는 공유기를 거쳐 사설 IP주소로 변경되어 여러분의 사설 네트워크 속 호스트에 이르게 됨

## 정적 IP주소와 동적 IP주소

**정적 할당**

호스트에 직접 수작업으로 IP주소를 부여하는 방식

**동적 할당과 DHCP**

IP주소를 정적으로만 할당하다 보면 호스트의 수가 많아질 경우 관리가 곤란해질 수 있어 사용 가능한 IP주소 할당 방식이 바로 동적 할당

직접 일일이 입력하지 않아도 호스트에 IP주소가 동적으로 할당되는 방식

이렇게 할당된 IP주소를 동적 IP주소라고 부름

IP동적 할당에 사용되는 대표적인 프로토콜이 바로 DHCP

IP주소 할당은 IP주소 할당받고자 하는 호스트와 해당 호스트에게 IP주소를 제공하는 DHCP서버간에 메시지를 주고받음으로써 이루어짐

IP 주소를 할당받는 과정에서 클라이언트 DHCP서버 간에 주고받는 메시지의 종류 4가지

1.  **DHCP Discover (클라이언트 → DHCP서버)**
    클라이언트는 DHCP Discover메시지를 통해 DHCP 서버를 찾고 이는 브로드 캐스트로 전송됨
    아직 IP주소를 할당받지 못했으므로 송신지 IP주소는 0.0.0.0으로 설정됨
2.  **DHCP Offer (DHCP 서버 → 클라이언트)**
    DHCP서버는 DHCP Discover 메시지를 받은 뒤 클라이언트에게 DHCP Offer메시지를 보냅니다. 즉 이 메시지는 클라이언트에게 할당해 줄 IP주소를 제안하는 메시지임 클라이언트에게 제안할 IP주소뿐만 ㅇ니라 서브넷 마스크, 임대 기간 등의 정보도 포함되어 있음
3.  **DHCP Request (클라이언트 → DHCP서버)**
    DHCP Request는 DHCP Offer 메시지에 대한 응답, 이 또한 브로드캐스트로 전송됨
4.  **DHCP Acknowledgment(이하 DHCP ACK)**
    DHCP서버는 클라이언트에게 DHCP ACK 메시지를 보냅니다. 이 메시지는 마치 최종 승인과도 같은 메시지로 DHCP ACK메시지까지 받은 클라이언트는 이제 할당 받은 IP주소를 자신의 IP주소로 설정한 뒤 임대 기간동안 IP주소를 사용함
        임대 갱신: IP 주소 임대 기간이 끄탄기 전에 임대 기간을 연장할 수 있음
