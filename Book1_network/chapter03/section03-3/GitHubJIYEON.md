## 라우팅이란?

-   라우터의 핵심 기능
-   패킷이 이동할 최적의 경로를 설정한 뒤 경로로 패킷을 이동시키는 것

## 라우터

-   네트워크 계층의 핵심 기능을 담당
-   가정 환경에서 공유기가 라우터의 역할을 대신하여 홈 라우터라고 부르기도 함

**네트워크 장비로서의 라우터**

홉: 라우팅 도중 패킷이 호스트와 라우터 간, 라우터와 라우터 간에 이동하는 하나의 과정

패킷은 여러 홉을 거쳐 라우팅 될 수 있는 것

## 라우팅 테이블

특정 수신지까지 도달하기 위한 정보를 명시한 일종의 표와 같은 정보

**수신지 IP주소와 서브넷 마스크**: 최종적으로 패킷을 전달할 대상을 의미

**다음 홉 (게이트웨이)**: 최종 수신지까지 가기 위해 다음으로 거쳐야 할 호스트의 IP주소와인터페이스를 의미

**네트워크 인터페이스**: 패닛을 내보낼 통로, 인터페이스(NIC) 이름이 직접적으로 명시되거나 인터페이스에 대응하는 IP주소가 명시되기도 함

**메트릭**: 해당 경로로 이동하는 데에 드는 비용을 의미

디폴트 라우트: 라우팅 테이블에 없는 경로로 패킷을 전송해야 할 떄가 있음 이 경우 기본적으로 패킷을 내보낼 경로를 설정하여 해당 경로로 패킷을 내보낼 수 있음

수신지 IP 주소(네트워크 대상), 서브넷 마스크(네트워크 마스크), 게이트웨이, 인터페이스(에 할당된 IP주소), 메트릭이 출력되는 것을 볼 수 있음

## 정적 라우팅과 동적 라우팅

라우팅 ——> (수동) 정적 라우팅
: 사용자가 수동으로 직접 채워 넣은 라우팅 테이블의 항목을 토대로 라우팅이 되는 방식

라우팅 ——> (자동) 동적 라우팅

: 네트워크 규모가 커지고 관리해야 할 때, 자동으로 라우팅 테이블 항목을 만들고, 이를 라우팅하는 방식을 의미

모든 라우터는 특정 수신지까지 도달하기 위한 최적의 경로를 찾아 라우팅 테이블에 추가하려고 노력함 → 이 과정에서 사용되는 프로토콜이 바로 (동적) 라우팅 프로토콜임

## 라우팅 프로토콜

라우터끼리 자신들의 정보를 교환하며 패킷이 이동할 최적의 경로를 찾기 위한 프로토콜

**IGP**: AS내부에서 수행되느냐

**EGP**: AS외부에서 수행되느냐

**IGP: RIP와 OSPF**

이 프로토콜들은 최적의 경로를 선정하는 과정에서 거리 벡터가 사용되느냐, 링크 상태가 사용되느냐로 구분할 수 있음

RIP는 거리 벡터를, OSPF는 링크 상태를 사용되느냐로 구분할 수 있음

**RIP는 거리 백터 기반의 라우팅 프로토콜**

거리 벡터 라우팅 프로토콜이란 이름 그대로 거리를 기반으로 최적의 경로를 찾는 라우팅 프로토콜을 의미함, 인접한 라우터끼리 경로 정보를 주기적으로 교환하며 라우팅 테이블을 갱신함

**OSPF는 링크 상태 라우팅 프로토콜**

링크 정보를 비롯한 현재 네트워크의 상태를 그래프의 형태로 링크 상태 데이터베이스에 저장

AS를 에어리어 라는 단위로 나누고, 구분된 에어리어 내에서만 랭크 상태를 공유함

에어리어 경계에 있는 ABR이라는 라우터가 에어리어 간의 연결을 담당함

**EGP: BGP**

대표적인 EGP로는 BGP가 있음

AS간의 통신에서 사용되는 대표적인 프로토콜, AS간의 통신이 ‘가능한’프로토콜

BGP로 AS내 라우터 간 통신도 가능

AS간의 통신을 위한 BGP 는 eBGP, AS내의 통신을 위한 BGP는 iBGP라고도 함

다른 AS와의 BGP연결을 유지하기 위해서는 BGP라우터끼리 연결되어 피어가 되어야 함

피어 관계가 되도록 연결되는 과정을 **피어링**

**AS-PATH속성**

1. BGP는 AS 간 라우팅을 할 때 거치게 될 ‘라우터’의 수가 아닌 ‘AS’의 수를 고려합니다.
2. BGP는 RIP처럼 단순히 수신지에 이르는 ‘거리’가 아닌, 메시지가 어디를 거쳐 어디로 이동하는지를 나타내는 ‘경로’를 고려합니다.

**NEXT-HOP속성**

다음 홉, 다음으로 거칠 라우터의 IP주소를 나타냄

AS1에서 곧장 AS2로 가는 경로의 NEXT-HOP은 AS1과 연결된 라우터 a의 IP주소

LOCAL-PREF속성

AS 외부 경로에 있어 AS 내부에서 (local) 어떤 경로를 선호할지(preference)에 대한 척도를 나타내는 속성

경로를 선택하는 과정에서 LOCAL-PREF값은 일반적으로 AS-PATH나 NEXT-HOP속성보다 우선시 되며, LOCAL-PREF값이 클수록 우선으로 선택됨
