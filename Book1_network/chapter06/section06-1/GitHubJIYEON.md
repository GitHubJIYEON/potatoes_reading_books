# 06-1 와이어샤크 설치 및 사용법

    - 패캣의 모습을 패킷 캡쳐 프로그램을 사용해서 관찰할 수 있음
    - 패킷 캡처 프로그램은 네트워크에서 송수신되는 패킷을 모니터링하고 분석할 수 있는 프로그램
    - 대표적인 패킷 캡쳐 프로그램 중 하나 “와이어샤크”

    ### 와이어샤크 설치

    윈도우 운영체제

    1. 와이어샤크 페이지에서 다운로드
    - https://www.wireshark.org/download.html
    - 설치 파일 실행 후 사용자 계정 컨트롤 창에 ‘예’를 누른다
    - 라이센스 동의 여부에 Noted 를 누른다
    - 기부 안내 화면에서 후원 여부와 상관없이  Next 클릭
    - Next 계속 누른다.
    - install 누른다.
    - 설치 완료가 끝나면 Next를 눌르고 Finish를 누른다.

    *USB트래픽을 캡처하는 기능도 제공


    맥OS 운영체제
    - 다운로드한 파일을 실행하면  Wireshark를 Applications폴더로 드래그하여 install ChmodBPF.pkg를 클릭하여 chmodBPF를 설치

    ### 와이어샤크 사용법

    **패킷 캡처**

    1. 화면에서 어떤 네트워크 인터페이스에서 송수신될 패킷을 관찰하고 싶은지 선택합니다.
    특정 인터페이스를 통해 패킷이 송수신되고 있다면 해당 인터페이스 이름 오른쪽에 지그재그 모양의 차트가 그려집니다.
    2. 화면에서 좌측 상단에 있는 네모 모양의 캡처 중단 아이콘도 유심히 봐두기
    3. 송수신되는 패킷을 더욱 명확히 캡처하기 위해 웹 브라우저를 열고 http://example.com에 접속하면 해당 URL에 접속하기 위해 http프로토콜로 주고받을 패킷도 캡쳐될 것으로 기대할 수 있습니다.

    **와이어샤크 화면 구성**

    캡쳐 중단 아이콘을 클릭하면 캡처가 중단되고, 중단 버튼의 좌측에 위치한 상어 지느러미 클릭하면 캡처를 다시 수행할 수 있습니다.
    1. 상단 테이블 - 선택한 인터페이스에서 송수신된 패킷들에 대한 정보를 확인할 수 있습니다. 이 정보에는 패킷 번호, 시간, 송시닞, 수신지, 프로토콜, 패킷의 길이 그리고 해당 패킷에 대한 간략한 설명이 포함됩니다.
    2. 우측 하단의 박스 - 이 박스에서는 패킷에 해당하는 실제 데이터를 확인할 수 있습니다.
    컴퓨터는 기본적으로 0과 1로 표기되는 2진수만 이해할 수 있기에 실제 네트워크에서 송수신되는 데이터 또한 2진수의 형태입니다. 그러나 2진수를 그대로 표기하면 길어지므로 16진수로 줄여서 쓴 것입니다.
    3. 좌측 하단의 박스 - 해당 패킷이 어떻게 캡슐화되어 있는지를 알 수 있습니다. HTTP, TCP, IPv4, 이더넷 프레임으로 캡슐화 된 것을 볼 수 있습니다.
    [Transmission Control Protocol]을 클릭하면 전체 패킷 중에서 TCP 세그먼트에 대한 내용이 강조됨, 우측 하단의 검은색 배경으로 강조된 d4 9e ~ 31 00 00 이 TCP 세그먼트입니다.
    TCP세그먼트 필드인 송신지 포트 번호, 수신지 포트번호, 순서번호, 확인 응답 번호 등을 확인할 수 있습니다.

    **패킷 필터링**

    와이어샤크가 제공하는 또 하나의 강력한 기능이 패킷 필터링
    갭처된 패킷 중에서 필터 조건에 맞는 특정 패킷만 조회할 수 있고 입력 창에 http를 입력하면 캡쳐된 패킷 중에서 HTTP 패킷을 필터링한 결과를 보여 줍니다.

    기본 필터: eth, ip, ipv6, arp, dhcp, rip, ospf, bgp, icmp, tcp, udp, dns, http, http2, http3, tls
    eth관련 필터: eth.addr, eth.dst, eth.src, eth.len, eth.type
    ip관련 필터: ip.addr, ip.dst, ip.src, ip.flags, ip.flags.df,ip.flags.mf,ip.flag_offset, ip.hdr.len, ip.id, ip.len, ip.opt.mtu, ip.ttl
    udp관련 필터: udp.port, udp.dstport, udp.srcport, udp.length
    tcp관련 필터
    http관련 필터: http.request, http.request.line, http.request.method, http.request.uri, http.request.uri.path…
    연산자

    | 연산자 |  | 설명 |
    | --- | --- | --- |
    | == | eq | 조건을 만족하는 패킷을 선택 |
    | != | ne | 조건을 만족하지 않는 패킷을 선택 |
    | && | and | 조건을 모두 만족하는 패킷을 선택 |
    | || | or | 조건을 하나 이상 만족하는 패킷을 선택 |
    | ! | not | 조건에 부합하지 않는 패킷을 선택 |
    | > | gt | 지정한 값을 초과하는 패킷을 선택 |
    | < | It | 지정한 값보다 작은 패킷을 선택 |
    | >= | ge | 지정한 값보다 크거나 같은 패킷을 선택 |
    | <= | le | 지정한 값보다 작거나 같은 패킷을 선택 |

    **캡쳐 파일 저장과 열기**

    1. 패킷 캡쳐 파일은 일반적으로 pcap확장자 또는 pcapng확장자로 저장됩니다.  파일로 캡쳐 내역을 저장하면 언제든지 캡처된 패킷들을 열어서 조회할 수 있음
    2. [Save Capture File As]창이 나타나면 저장 위치, 파일 이름을 설정한 뒤 저장 버튼을 클릭하면저장된 패킷 파일은 와이어샤크로 다시 열어볼 수 있습니다.
    3. 패킷 캡처 파일을 다운로드한 뒤, 와이어샤크로 돌아와 메뉴를 클릭하고 다운로드한 패킷 캡처 파일을 선택한 뒤 [열기] 버튼을 클릭하기
    4. 파일을 열면 패킷의 내용을 확인 할 수 있습니다.
