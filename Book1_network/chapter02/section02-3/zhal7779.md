# chapter 02-3 허브
통신 매체를 통해 송수신되는 메시지를 다른 호스트에게 전달되는 과정에 있어 네트워크 장비를 거칠 수 있다. 

대표적인 네트워크 장비로는 **물리 계층에 허브**, **데이터 링크 계층에는 스위치**가 있다.

물리 계층에서 여러 대의 호스트를 연결하는 허브에 대해 알아보자.
<br />
<br />
<br />

## 주소 개념이 없는 물리 계층

- **물리 계층에는 주소 개념이 없다.**
- 물리 계층의 네트워크 장비는 송수신되는 정보에 대한 어떠한 조작(⇒ 송수신 내용 변경)이나 판단을 하지 않는다.
- **데이터 링크 계층부터 송수신을 특정할 수 있는 주소(=MAC 주소) 개념이 존재한다.**
- 데이터 링크 계층 이상의 장비는 송수신지를 특정할 수 있고, 주소를 바탕으로 송수신되는 정보에 대한 조작과 판단을 할 수 있다.
<br />

## 허브

- **허브는 여러 대의 호스트를 연결하는 장치이다.**
- 리피타 허브라고 부르기도 하며, 네트워크의 허브는 이더넷 허브라고도 부른다.
- 허브는 커넥터를 연결할 수 있는 네 개의 연결지점이 있는데 이를 포트라고 부르며, 포트에 호스트와 연결된 통신 매체를 연결할 수 있다.

**허브의 특징**

1. **전달받은 신호를 다른 모든 포트로 그대로 다시 보낸다.**
    - 허브는 물리 계층에 속해 주소 개념이 없어 수신지를 특정할 수 없다, 따라서 신호를 전달받으면 조작이나 판단을 하지 않고 신호를 그저 내보내기만 한다.
    - 허브를 통해 신호를 전달받은 호스트는 데이터 링크 계층에서 패킷의 MAC 주소를 확인하고 자신과 관련 없는 주소는 폐기한다.
2. **반이중 모드로 통신한다.**
    - 반이중 모드는 1차선 도로처럼 송수신을 번갈아 가면서 하는 통신 방식이다.
    - 한 번에 한 방향으로만 전송할 수 있어 동시에 송수신이 불가하다.

**리피터**

- 허브 이외의 물리 계층으로 리피터라는 장비도 있는데, 리피터는 전기 신호가 감소하거나 왜곡되는 것을 방지하기 위해 전기 신호를 증폭시켜 주는 장비이다.
- 리피터도 물리 계층 장비이기에 조작이나 판단하지 않고 그저 신호를 증폭 시켜주기만 하는데, 허브는 리피터의 기능을 포함하는 경우가 많다.

**콜리전 도메인**

- 허브는 반이중 통신을 지원하기에 한 호스트가 허브에 송신하는 동안 다른 호스트는 기다려야 한다. 그러나 호스트들이 동시에 허브에 송신하는 경우가 있는데, 이런 경우를 충돌(콜리전)이 발생한다고 한다.
- 허브에 호스트가 많이 연결되어 있을수록 충돌 발생 가능성이 높으며, **충돌이 발생할 수 있는 영역을 콜리전 도메인이라고 한다.**
- **허브에 연결된 모든 호스트는 하나의 콜리전 도메인에 속하는데, 콜리전 도메인의 범위가 클수록 충돌이 발생할 가능성이 높아진다.**
- **넓은 콜리전 도메인으로 인한 충돌 문제를 해결하려면 CSMA/CD 프로토콜을 사용하거나 스위치 장비를 사용해야한다.**
<br />

## CSMA/CD

- 허브와 같은 반이중 네트워크의 충돌을 방지하는 대표적인 프로토콜이다.
- 이더넷을 대표하는 송수신 방법이다.

1. **CS는 Carrier Sense, 캐리어 감지를 의미한다.** 
    - 현재 통신 매체의 사용 가능 여부를 검사한다.( ⇒ 통신 매체상에서 흐르는 신호를 감지)
2. **MA는 Multiple Access, 다중 접근을 의미한다.**
    - 복수의 호스트가 네트워크에 접근하는 상황을 의미한다.
3. **CD는 Collision Detection, 충돌 검출을 의미한다.**
    - 충돌이 발생하면 충돌을 검출한다.
    - 충돌을 감지하면 전송이 중단되고, 충돌을 검출한 호스트는 다른 이들에게 충돌이 발생했음을 알리고자 잼 신호라는 특별한 신호를 보낸다.

**CSMA/CD 프로토콜 사용시**

1. 현재 전송이 가능한 상태인지 확인
2. 다른 호스트가 전송 중이지 않을 때 메시지를 전송
3. 만일 부득이하게 다수의 호스트가 접근하여 충돌이 발생하면 임의 시간만큼 대기한 후 다시 전송
