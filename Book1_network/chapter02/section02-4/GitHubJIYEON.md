## 스위치

-   데이터 링크 계층의 네트워크 장비
-   2계층에서 사용한다고 하여 L2 스위치
-   여러 포트에 호스트 연결 할 수 있음 (허브와 유사)
-   MAC주소를 학습해 특정 MAC주소를 가진 호스트에만 프레임 잔달 할 수 있음
-   전아중 모드의 통신을 지원
-   포트별로 콜리전 도메인 나뉨
-   CSMA/CD 프로토콜 필요하지 않음
-   전달받은 신호를 수신지 호스트가 연결된 포트로만 내보내고, 전이중 모드로 통신하면 충돌 위험 감소함

**스위치 특징**

-   가장 중요한 특징: 특정 포트에 연결된 호스트의 MAC주소와의 관계를 기억함
-   원하는 호스트에만 프레임 전달 할 수 있음

⇒ MAC 주소 학습

-   MAC 주소 학습을 위해 포트와 연결된 호스트의 MAC 주소 간의 연관 관계를 메모리에 표 형태로 기억함
-   MAC 주소 테이블: 스위치의 포트와 연결된 호스트의 MAC주소 연관 관계를 나타냄

## MAC 주소 학습

MAC주소 테이블 어떻게 채워지고 유지 되는가? 3가지 기능을 통해 이루어짐

1. 플러딩
2. 포워딩과 필터링
3. 에이징

**호스트 A / 호스트 B / 호스트 C**

-   스위치의 MAC 주소 학습은 프레임 내 ‘**송신지 MAC주소**’필드를 바탕으로 이루어짐

1.  **플러딩 (스위치의 동작)**
    스위치가 처음 호스트 A에서 프레임을 수신 → 프레임 내 ‘성신지 MAC주소’ 정보를 바탕으로 호스트 A의 MAC주소와 연결된 포트를 MAC주소 테이블에 저장함
        - 여전히 수신지 호스트 C가 어느 포트에 연결되어 있는지 알지는 못함
        - 스위치는 마치 허브처럼 송신지 포트를 제외한 모든 포트로 프레임을 전송
        ⇒ 이러한 스위치의 동작을 “플러딩”이라고 함
2.  **필터 (전달받은 프레임을 어디로 보낼지)**
    - 호스트 C는 스위치로 응답 프레임을 전송함
    - 이 프레임의 ‘송신지 MAC주소’필드에는 호스트 C의 MAC주소가 명시되어 있고 이를 통해 스위치는 호스트C의 MAC주소와 연결된 포트를 알아내어 이 정보를 MAC주소 테이블에 기록함
    - 이제 스위치는 호스트 A와 C의 MAC주소와 연결된 포트를 알고 있으므로 두 호스트가 프레임을 주고받을 때는 다른 포트로 프레임을 내보낼 필요가 없게 됨
3.  **포워딩 (프레임이 전송될 포트에 실제로 프레임을 내보내는 것)**

    호스트 A가 호스트 C에게프레임을 전송하면 스위치는 호스트 B,D가 연결된 포트로는 내보내지 않도록 필터링하고 호스트 C가 연결된 포트로 프레임을 포워딩함

**에이징**: MAC주소 테이블에 등록된 특정 포트에서 일정 시간 동안 프레임을 전송받지 못했다면 해당 항목은 삭제됨

## VLAN (스위치를 이용해 만들 수 있는 가상의 LAN)

-   스위치의 또 다른 기능인 한대의 스위치로 가상의 LAN을 만드는 방법
-   네트워크상 불필요한 트래픽이 늘어나 성능 저하로 이어짐
-   스위치도 같은 네트워크 (LAN)에 속할 필요가 없는 호스트가 있을 수 있기에
    ⇒ VLAN 구성한다

물리적 스위치라도 여러 대의 스위치가 있는 것처럼 논리적인 단위로 LAN을 구획할 수 있다

**포트 기반 VLAN**

-   스위치의 포트가 VLAN을 결정하는 방식
-   사전에 특정 포트에 VLAN을 할당, 해당 포트에 호스트를 연결하여 VLAN에 포함시킴
-   한대의 스위치로만 포트 기반 VLAN을 나누면 푸트수가 부족해질 수 있다고 VLAN스위치 여러 대를 구비하면 포트의 낭비임

**VLAN트러킹**

-   두 대 이상의 VLAN스위치를 효율적으로 연결하여 확장하는 방법
-   수위치 간의 통신을 위한 특별한 포트인 트렁크 포트에 VLAN스위치를 서로 연결하는 방식임

**MAC 기반 VLAN**

-   사전에 설정된 MAC주소에 따라 VLAN이 결정되는 MAC기반 VLAN도 있음
-   송수신하는 프레임 속 MAC주소가 속할 VLAN을결정하는 방식
-   MAC기반 VLAN은 포트 기반 VLAN과 달리 송수신하는 프레임 속 MAC주소가 호스트가 속할 VLAN을 결정함
