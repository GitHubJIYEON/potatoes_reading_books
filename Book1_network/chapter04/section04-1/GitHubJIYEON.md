## **신뢰할 수 없는 통신과 비연결형 통신**

**IP의 한계**

1. **신뢰할 수 없는 (비신뢰성) 프로토콜**

-   IP프로토콜이 패킷이 수신지까지 제대로 전송되었다는 보장을 하지 않는 특징을 일컫음
-   IP프로토콜이 패킷이 수신지까지 제대로 전송되었다는 보장을 하지 않는 특징
-   재전송X, 순서대로X 이러한 전송 특징을 **최선형 전달**

2. **비연결성 (비연결형, 비연결지향성, 비연결지향형) 프로토콜**

-   송수신 호스트 간에 사전 연결 수립 작업을 거치지 않는 특징을 의미

---

IP를 통한 패킷의 전달은 신뢰성이 없는 통신이자 연결을 수립하는 과정이 없는 통신입니다.

전송 계층이 존재하는 이유와도 직결됩니다.

## **IP의 한계를 보완하는 전송 계층**

1. 전송 계층은 연결형 통신을 가능하게 합니다.

    전송 계층의 연결형 프로토콜인 TCP는 이와 유사하게 두 호스트가 정보를 주고받기 전에 마치 가상의 회선을 설정하듯이 연결을 수립합니다.

2. 전송 계층은 신뢰성 있는 통신을 가능하게 합니다.

    TCP는 패킷이 수신지까지 올바른 순서대로 확실히 전달되는 것을 보장하기 위해 재전송을 통한 오류 제어, 흐름 제어, 혼잡 제어 등 다양한 기능들을 제공합니다.

-   전송 계층에는 UDP라는 프로토콜 존재
-   UDP는 신뢰할 수 없는 통신
-   비연결형 통신을 가능하게 하는 전송 계층의 프로토콜로 TCP보다는 비교적 빠른 전송이 가능

## **응용 계층과의 연결 다리, 포트**

**포트의 정의**

-   패킷은 실행 중인 특정 애플리케이션 프로세스까지 전달되어야만 합니다.
-   패킷의 최종 수신 대상은 특정 애플리케이션 프로세스
-   패킷에 특정 애플리케이션을 식별할 수 있는 정보가 포함되어 있어야 함

포트의 분류

전송 계층에서 포트 번호를 통해 특정 애플리케이션을 식별

패킷 내 수신지 포트와 송수신지 포트를 통해 송수신지 호스트의 애플리케이션을 식별

포트 혹은 포트 번호는 개발을 하는 과정에서 자주 접하게 될 용어

포트 번호는 번호의 범위에 따라 세 종류로 나늬어짐

-   잘 알려진 포트
-   등록된 포트
-   동적 포트, 사설 포트, 임시 포트

포트 번호를 통해 실행 중인 특정 애플리케이션을 식별할 수 있음

특정 호스트에서 실행 중인 특정 애플리케이션 프로세스를 식별할 수 있음

IP주소: 포트 번호 형식으로 IP주소와 함께 표기되는 경우가 많음

## **포트 기반 NAT**

**NAT 변환 테이블**

NAT 변환 테이블(이하 NAT 테이블)에는 다음 그림처럼 변환의 대상이 되는 IP주소 쌍이 명시되어 있습니다.

| 네트워크 외부 | 네트워크 내부 |
| ------------- | ------------- |
| 1,2,3,4       | 192.168.0.5   |
| 1.2.3.5       | 192.168.0.6   |

⇒ 오늘날 NAT기술은 대부분 다수의 사설 IP주소를 그보다 적은 수의 공이 IP 주소로 변환함

**NAPT (APT)**

-   포트를 활용해 하나의 공인 IP주소를 여러 사설 IP주소가 공유할 수 있도록 하는 NAT의 일정
-   NAT테이블에 변환할 IP주소 쌍과 더불어 포트 번호도 함께 기록하고, 변환함
-   즉 NAPT를 이용하면 네트워크 내부에서 사용할 IP주소와 네트워크 외부에서 사용할 IP주소를 N:1로 관리할 수 있습니다. 이런 점에서 NAPT는 공인 IP주소 수 부족 문제를 개선한 기술로 간주함

## 좀 더 알아보기 1 ) 포트 포워딩

네트워크 내 특정 호스트에 IP주소와 포트 번호를 미리 할당하고, 해당 IP주소: 포트 번호로써 해당 호스트에게 패킷을 전달하는 기능

특정 IP주소와 포트 번호 쌍을 특정 호스트에게 할당한 뒤, 외부에서 통신을 시작할 호스트에게 해당 접속 정보(IP 주소:포트 번호 쌍)을 알려 주면 됩니다.

포트 포워딩은 주로 네트워크 외부에서 네트워크 내부로 통신을 시작할 때, 네트워크 내부의 서버를 외부에서 접속할 수 있도록 접속 정보를 공개하기 위해 자주 사용함

## 좀 더 알아보기 2 ) ICMP

IP의 신뢰할 수 없는 전송 특성과 비연결형 전송 특성을 보완하기 위한 네트워크 계층의 프로토콜로 ICMP

ICMP는 IP 패킷의 전송 과정에 대한 피드백 메시지 (이하 ICMP메시지)를 얻기 위해 사용하는 프로토콜

1. 전송 과정에서 발생한 문제 상황에 대한 오류 보고와
2.  2. 네트워크에 대한 진단 정보(네트워크상의 정보 제공)

ICMP메시지는 타입과 코드로 정의

타입과 코드는 ICMP 메시지의 유형이 번호로 명시되고, 코드 필드에는 구체적인 메시지 내용이 번호로 명시됨

ICMP가 IP의 신뢰성을 보장하는 것이 아니라는 점

ICMP는 어디까지나 IP의 신뢰할 수 없는 특성을 보완하기 위한 ‘도우미’역할

여전히 IP패킷은 수신지까지 도달하지 못하거나 ICMP메시지를 담은 패킷 자체가 송신지까지 되돌아오지 못할 수 있습니다.
신뢰성을 완전히 보장하기 위해서는 앞서 배웠던 전송 계층의 프로오콜이 필요
