전송 계층 개요: IP의 한계와 포트

신뢰할 수 없는 통신
  IP 프로토콜이 패킷이 수신지 까지 제대로 전송되었다는 보장을 하지 않는 특징을 말한다.
  패킷의 데이터가 손상되거나, 중복된 패킷이 전송되었더라도 이를 확인하지 않고 재전송도 하지 않으며,
  순서대로 패킷이 도착할 것이라는 보장도 하지 않는다는 의미이다.
  다른말로 최선형 전달이라고 부른다.

비연결형 통신
  송수신 호스트 간에 사전 연결 수립 작업을 거치지 않는 특징을 의미하고, 그저 수신지를 향해
  패킷을 보내기만 할 뿐이다.
  비연결형 통신을 하는 이유는 성능 때문이다. 인터넷상에서 돌아다니는 패킷의 종류와 갯수는 매우 다양하기 때문에,
  한두개의 패킷 손실은 감수하더라도 빠른 전송이 우선시되는 경우도 있다.

IP의 한계를 보완하는 전송 계층
  1. 전송 계층은 연결형 통신을 가능하게 한다.
    연결형 통신의 대표적인 전송 프로토콜로는 TCP가 있다.
    TCP는 두 호스트가 정보를 주고받기 전에 가상의 회선을 설정하듯이 연결을 수립한다.
    송수신하는 동안에는 연결을 유지하고, 송수신이 끝나면 연결을 종료할 수 있다.
  
  2. 전송 계층은 신뢰성 있는 통신을 가능하게 한다.
    신뢰성 있는 통신 또한 TCP를 통해 가능하다.
    연결형 통신과 신뢰성 있는 통신이 그렇지 않은 통신에 비해 무조건 좋은 것만은 아니다.
    그래서 전송 계층에는 UDP라는 프로토콜도 존재한다.
    UDP는 신뢰할 수 없는 통신, 비연결형 통신을 가능하게 하는 전송 계층의 프로토콜로 TCP보다는 비교적 빠른 전송이 가능하다.

응용 계층과의 연결 다리, 포트
  포트
    어떤 패킷을 수신할 애플리케이션에 대한 정보가 패킷에 포함되어 있지 않다면 해당 패킷을 
    어떤 애플리케이션에 전달해야 할지 알 수 없다. 즉, 패킷이 실행 중인 특정 애플리케이션까지
    전달되려면, 패킷에 특정 애플리케이션을 식별할 수 있는 정보가 포함되어야 하는데, 이 정보를 포트라고 한다.
  
  포트의 분류
    전송 계층에서는 포트번호를 통해 특정 애플리케이션을 식별한다.
    전송 계층의 핵심 프로토콜인 TCP와 UDP는 모두 포트 번호 필드인 송신지 포트 번호와
    수신지 포트 번호를 포함한다.
    포트 번호는 0~65535번까지 65536개가 존재한다.
    포트 번호는 번호의 범위에 따라 잘 알려진 표트, 등록된 포트, 동적 포트로 나뉘어 진다.

    잘 알려진 포트
      0~1023번 까지의 포트 번호는 잘 알려진 포트이다.
      범용적으로 사용되는 애플리케이션 프로토콜이 일반적으로 널리 알려진, 유명한 포트 번호를 의미한다.
    
    등록된 포트
      1024~49151번 까지의 포트 번호는 등록된 포트 이다.
      흔히 사용되는 애플리케이션 프로토콜에 할당하기 위해 사용된다.
    
    동적 포트
      49152~65535번 까지의 포트 번호는 동적/사설/임시 포트라고 불린다.
      인터넷 할당 번호 관리 기관에 의해 할당된 애플리케이션 프로토콜이 없고,
      특별히 관리되지 않는 포트 번호인 만큼 자유롭게 사용할 수 있다.
    
    IP주소와 포트번호에 대한 정보가 함께 주어지면 특정 호스트에서 실행중인 특정 애플리케이션 프로세스를 식별할 수 있다.
    그래서 포트번호는 일반적으로 IP주소:포트번호 형식으로 IP주소와 함께 표현되는 경우가 많다.

  포트기반 NAT
    NAT란 IP주소를 변환하는 기술이며, 주로 네트워크 내부에서 사용되는 사설 IP주소와 네트워크 외부에서 사용되는
    공인 IP주소를 변환하는 데 사용된다.
    이러한 변환을 위해 주로 사용되는 것이 NAT 변환 테이블이다.

    NAT 변환 테이블
      변환의 대상이 되는 IP주소 쌍이 명시되어 있다.
      NAT 테이블의 항목을 일대일로 대응해 NAT를 활용하는 것이 가능하기는 하지만,
      이 방식만으로 많은 사설 IP주소를 변환하기에는 무리가 있다.
      사설과 공인 IP주소가 일대일로 대응된다면 네트워크 내부에서 사용되는 사설 IP주소만큼의 공인 IP주소가 필요하기 때문이다.
      공인 IP주소는 고유한 주소인데 여러 사설IP주소가 하나의 공인 IP주소로 변환되는게 가능하게 끔 하는게 포트의 활용이다.
    
    NAPT
      포트 기반의 NAT를 NAPT라고 한다.
      네트워크 외부에서 사용할 IP주소가 같더라도 포트번호가 다르면 네트워크 내부의 호스트를 특정할 수 있기 때문에,
      다수의 사설 IP주소를 그보다 적은 수의 공인IP주소로 변환할 수 있게 된다.
      즉 NAPT를 이용하면 네트워크 내부에서 사용할 IP주소와 네트워크 외부에서 사용할IP주소를 N:1로 관리할 수 있다.
      
