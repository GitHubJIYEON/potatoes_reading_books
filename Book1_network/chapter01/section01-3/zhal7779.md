# chapter 01-3 컴퓨터 네트워크 미시적으로 살펴보기
네트워크를 미시적인 관점으로 살펴보자.
<br />
## 프로토콜

- 현대 인터넷은 호스트(클라이언트-서버)간 네트워크로 정보를 주고 받는 방식으로 **패킷 교환방식**을 사용한다.
- **패킷**은 **택배와 유사한 개념으로,  컴퓨터가 서로 연결되어 정보를 주고 받는다.**
- 서로 다른 통신 장치들이 정보를 주고받으려면 프로토콜이 통해야 한다.
- **프로토콜**은 **노드간 정보를 올바르게 주고받기 위해 합의된 규칙이나 방법을 의미**한다.
ex) 우리가 인터넷을 이용하거나, 이메일을 주고 받고, 파일을 주고 받을 수 있는 것도 상대 호스트와 동일한 프로토콜을 사용하기에 가능하다.
<br />
<br />
<br />
## 네트워크 참조 모델(=네트워크 계층 모델)
- 네트워크를 통해 정보를 주고 받을 때는 정형화된 여러 단계를 거친다. 이 과정은 계층으로 표현할 수 있는데, 이렇게 통신이 일어나는 각 과정을 계층으로 나눈 구조를 네트워크 참조 모델(=네트워크 계층 모델)이라고 한다. 
- 네트워크는 통신과정을 계층으로 나눈 이유는 두가지 있다
1. 네트워크 구성과 설계가 용이하다.
- 각 계층이 수행해야 할 역할이 정해져 있으므로 계층의 목적에 맞게 프로토콜과 네트워크 장비를 계층 별로 구성할 수 있다.
네트워크 문제 진단과 해결이 용이하다.
통신 과정에서 문제가 발생하더라고 문제의 원인을 계층 별로 진단하기 수월하다.
OSI 모델
OSI 모델은 국제 표준화 기구에서 만든 네트워크 참조 모델이다.
통신 단계를 7개의 계층으로 나누는데, 최하위 계층에서 최상위 계층순으로 각각 물리 계층, 데이터 링크 계층, 네트워크 계층, 전송 계층, 세션 계층, 표현 계층, 응용 계층이다.
 

물리 계층
OSI 모델의 최하단에 있는 계층으로, 1과 0으로 표현되는 비트 신호를 주고 받는 계층이다. 
통신 매체에 맞는 신호로 운반되도록 비트 데이터의 변환이 이루어지고 통신 매체를 통한 송수신이 이루어지는 계층이다. 
데이터 링크 계층
네트워크 내 주변 장치 간의 정보를 올바르게 주고받기 위한 계층이다.
물리 계층과 서로 밀접하게 연관되어있으며, 물리 계층을 통해 주고받는 정보에 오류가 없는지 확인하고 전송 과정에서 발생할 수 있는 충돌 문제를 해결하는 계층이다.
네트워크 계층
메시지를 (다른 네트워크에 속한) 수신지까지 전달하는 계층이다. 
네트워크 간의 통신이 이루어지며, 인터넷을 가능하게 하는 계층이다. 
네트워크 계층에서는 IP주소를 통신하고자 하는 수신지 호스트와 네트워크를 식별하고, 원하는 수신지에 도달하기 위한 최적의 경로를 결정한다. 
전송 계층
신뢰성 있고 안전성 있는 전송을 해야 할 때 필요한 계층이다.
패킷의 흐름을 제어하거나 전송 오류를 점검해 신뢰성 있고 안정적인 전송이 이루어지도록 한다. 
세션 계층
세션을 관리하기 위한 계층이다.
세션이란 통신을 주고받는 호스트의 응용 프로그램 간 연결 상태를 의미한다. 
세션 계층에서는 연결 상태를 생성하거나 유지하고, 종료되었을 때 끊어주는 역할을 담당한다. 
표현 계층
사람이 이해할 수 있는 언어인 문자를 컴퓨터가 이해할 수 있는 코드로 변환하거나, 압축, 암호와 같은 작업을 하여 번역가와 같은 역할을 하는 계층이다. 
응용 계층
OSI 참조 모델 최상단에 있는 계층으로 사용자 및 사용자가 이용하는 응용 프로그램과 가장 밀접히 맞닿아 있는 계층이다. 
응용 계층은 사용자가 이용할 응용 프로그램에 다양한 네트워크 서비스를 제공한다. 
TCP/IP 모델
OSI 모델은 주로 네트워크를 이론적으로 기술하고 이해할 때 사용하는 반면, TCP/IP 모델은 이론보다는 구현에 중점을 둔 네트워크 참조 모델이다. 
OSI 모델은 목적이 ‘이상적 설계’라면, TCP/IP 모델은 ‘실용적 구현’으로 볼 수 있다.
TCP/IP 모델은 TCP/IP 4계층 이라고 불린다. 
TCP/IP 모델은 최하위 계층에서 최상위 계층순으로 각각 네트워크 엑세스 계층, 인터넷 계층, 전송 계층, 응용 계층으로 이루어진다.


네트워크 액세스 계층 
링크 계층 또는 네트워크 인터페이스 계층이라고 부른다. 
OSI 모델의 데이터 링크 계층과 유사하다. 
인터넷 계층
OSI 모델의 네트워크 계층과 유사하다. 
전송 계층
OSI 모델의 전송 계층과 유사하다. 
응용 계층
OSI 모델의 세션 , 표현, 응용 계층을 합친것과 유사하다. 
<br />
<br />
<br />
## 캡슐화와 역캡슐화
- 패킷의 송신 과정에서는 캡슐화가 이루어지고, 수신 과정에서는 역캡슐화가 이루어진다. 
캡슐화(=인캡슐레이션)
캡슐화는 데이터 전송 과정에서 헤더 및 트레일러를 추가해 나가는 과정을 의미한다. 
어떤 정보를 송신할 때 각 계층에서는 상위 계층으로부터 내려받은 패킷을 페이로드로 삼아, 프로토콜에 걸맞은 헤더(혹은 트레일러)를 덧붙인 후 하위 계층으로 전달한다. 
ex) 페이로드를 택배 안에 담을 물품에 빗댄다면, 이는 마치 상위 계층의 택배 상자를 하위 계층의 택배 상자에 담는것과 같다. 
한 단계 아래 계층은 바로 위의 계층으로부터 받은 패킷에 헤더 및 트레일러를 추가해 나간다
역캡슐화(=디캡슐레이션)
역캡슐화는 캡슐화 과정에서 붙인 헤더(및 트레일러)를 제거하는 과정을 의미한다.
어떤 메시지를 수신할 때는 캡슐화 과정에서 붙였던 헤더(및 트레일러)를 각 계층에서 확인한 뒤 제거한다.
ex) 택배 상자에 붙인 송장을 뗴어내고 상자 속의 상자들을 꺼내는 과정과 같다.
<br />
<br />
<br />
## PDU(Protocol Data Unit)
- 각 계층에서 송수신되는 메시지의 단위를 PDU라고 한다.
- 상위 계층에서 전달받은 데이터에 현재 계층의 프로토콜 헤더(및 트레일러)를 추가하면 현재 계층의 PDU가 된다. 
- PDU는 주로 전송 계층 이하의 메시지를 구분하기 위해 사용한다. 전송 계층보다 높은 계층에서는 일반적으로 데이터 혹은 메시지로만 지칭한다.
- ‘패킷’이라는 용어는 패킷 교환 네트워크에서 쪼개어져 전송되는 단위를 통칭하는 용어로 사용되기도 하지만, 네트워크 계층에서의 송수신 단위를 지칭하기 위해 사용된다.
