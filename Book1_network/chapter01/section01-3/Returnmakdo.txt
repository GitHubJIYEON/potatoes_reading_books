네트워크 미시적으로 살펴보기

프로토콜
  네트워크에서의 언어와 유사한 개념이다.
  노드간의 정보를 올바르게 주고받기 위해 합의된 규칙이나 방법을 의미한다.

  모든 프로토콜에는 저마다의 목적과 특징이 다양하다.
  목적과 특징이 다르기 때문에 부합하는 정보도 달라질 수 있으며,
  특정 프로토콜로 주고받는 패킷의 부가 정보도 달라질 수 있다.


네트워크 참조 모델
  통신이 일어나는 각 과정을 계층으로 나눈 구조이다.
  계층으로 표현한다는 점에서 네트워크 계층 모델이라고 부르기도 한다.

  통신과정을 계층으로 나눈 이유 2가지
  1. 네트워크 구성과 설계가 용이하다
     각 계층이 수행해야 할 역할이 정해져 있으므로 계층의목적에 맞게 프로토콜과
     네트워크 장비를 계층별로 구성할 수 있다는 장점이 있다.
     물론 모든 프로토콜이나 네트워크 장비가 참조 모델과 완벽히 들어맞는 것은 아니다
     하지만, 네트워크 참조 모델은 네트워크 구성 및 설계에 있어 훌륭한 가이드라인 역할을 수행한다.

  2. 네트워크 문제 진단과 해결에 용이하다
     통신과정에 문제가 발생했을 때 원인을 계층별로 진단하기 수월하다는 장점이 있다.
     계층별로 진단하게 되면 문제 발생 지점을 추측할 수 있어, 해결이 수월하다.
  
  대표적인 네트워크 참조 모델
    OSI 모델
    국제 표준화 기구에서 만든 네트워크 참조 모델이다.
    통신단계를 7개의 계층으로 나눈다.
    
    최하위 -> 최상위 순
    - 물리 계층
      OSI모델의 최하단에 있는 계층으로 1,0으로 표현되는 비트 신호를 주고받는 계층이다.
      통신 매체에 맞는 신호로 운반되도록 비트 데이터의 변환이 이루어지고, 통신 매체를 통한
      송수신이 이루어지는 계층이다.
    
    - 데이터 링크 계층
      네트워크 내 주변 장치간의 정보를 올바르게 주고받기 위한 계층
      LAN 기술이 데이터 링크 계층에 녹아있다.
      네트워크 내 송수신지를 특정할 수 있고, 때로 전송 과정에서 발생할 수 있는
      충돌 문제를 해결하는 계층이다.

    - 네트워크 계층
      메시지를 수신지까지 전달하는 계층이다.
      인터넷을 가능하게 하는 계층이라고 할 수 있다.
      IP주소라는 주소체계를 통해 통신하고자 하는 수신지 호스트와 네트워크를 식별하고,
      원하는 수신지에 도달하기 위한 최적의 경로를 결정한다.

    - 전송 계층
      신뢰성 있고 안전성 있는 전송을 해야할 때 필요한 계층이다.
      패킷의 흐름을 제어하거나 전송 오류를 점검해 신뢰성 있고 안정적인 전송이 이루어지도록 한다.
      이 외 "포트"라는 정보를 통해 실행중인 응용프로그램의 식별이 이루어지기도 한다.

    - 세션 계층
      통신을 주고받는 호스트의 응용 프로그램 간 연결 상태(세션)를 관리하기 위한 계층
      연결 상태를 생성/유지/종료를 담당하는 역할이다.

    - 표현 계층
      번역가와 같은 역할의 계층이다.
      사람<->컴퓨터 언어변환 / 압축 / 암호화 등의 작업을 한다.

    - 응용 계층
      OSI 참조 모델 최상단에 있는 계층이다.
      유저가 이용하는 응용 프로그램과 가장 밀접히 닿아 있는 계층이다.
      웹 브라우저 프로그램에 웹 페이지를 제공하거나 이메일 프로그램에 송수신된 이메일을
      제공하는 등 실질적 네트워크 서비스가 제공되는 계층이다.

    TCP/IP 모델(IP의 약자)
    이론보다는 구현에 중점을 둔 네트워크 참조 모델이다.
    
    OSI -> 이상적 설계
    TCP/IP -> 실용적 구현
    
    최하위 -> 최상위 순
    - 네트워크 액세스 계층
      링크 계층 또는 네트워크 인터페이스 계층이라고 불리운다.
      OSI모델의 데이터 링크 계층과 유사하다.

    - 인터넷 계층
      OSI모델의 네트워크 계층과 유사하다.

    - 전송 계층
      OSI모델의 전송 계층과 유사하다.

    - 응용 계층
      OSI모델의 세션, 표현, 응용 계층을 합친것 과 유사하다.
    


캡슐화(역캡슐화)
  패킷이 실제로 어떻게 송수신되는지와 연관되어 있다.

  패킷은 송신과정에서 캡슐화, 수신과정에서 역캡슐화가 이루어진다.

  캡슐화
    어떤 정보를 송신할 때 각 계층에서는 상위 계층으로부터 내려받은 패킷을
    페이로드 삼아 프로토콜에 걸맞은 헤더or트레일러 를 덧붙인 후 하위 계층으로 전달한다.

    이렇게 송신 과정에서 헤더 및 트레일러를 추가해 나가는 과정을 캡슐화 라고 부른다.

  역캡슐화
    캡슐화 과정에서 붙혔던 헤더 및 트레일러를 각 계층에서 확인한 뒤 제거하는 것을 말한다.

PDU
  각 계층에서 송수신되는 메시지의 단위를 PDU(Protocol Data Unit)이라고 부른다.

  OSI 모델의 각 계층에서의 PDU
  OSI 계층               PDU
  응용 계층 \
  표현 계층 ->>>>>>> 데이터(data)
  세션 계층 /
  전송 계층 ->>>>>>> 세그먼트(segment), 데이터그램(datagram)
  네트워크 계층 ->>> 패킷(packet)
  데이터 링크 계층-> 프레임(frame)
  물리 계층 ->>>>>>> 비트(bit)

  PDU는 주로 전송 계층 이하의 메시지를 구분하기 위해 사용한다.
  전송 계층보다 높은 계층에서는 일반적으로 데이터 혹은 메시지로만 지칭하는 경우가 많다.
  
  '패킷'이라는 용오는 패킷 교환 네트워크에서 쪼개어져 전송되는 단위를 통칭하기 위한
  일반적인 용어로도 사용되지만 네트워크 계층에서 송수신 단위를 지칭하기 위해 사용되기도 한다.

OSI 7계층, TCP/IP 4계층은 사실 아무것도 하지 않는다??
  
  모든 프로토콜이나 네트워크 장비는 네트워크 참조 모델에 근거해 반드시 특정 계층에 완벽히 대응될 것이라
  생각할 수 있지만, 실제로는 그렇지 않다.

  네트워크 참조 모델은 말그대로 참조를 위한 가이드라인 일 뿐 엄격한 규칙이나 법규가 아니다.

  지금도 새로운 프로토콜과 네트워크 장비는 만들어지고 있고, 모든 프로토콜이 모든 모델의 특정 계층에
  완벽히 대응되지는 않는다.

  네트워크를 작동하는 주체는 참조 모델에 속한 대상이다.

  즉, 네트워크 참조 모델과 계층은 통신이 일어나는 단계를 역할별로 구획한 큰 그림, 이른바 '모델'일 뿐
  반드시 지켜야할 규칙이 아니도, 네트워크의 작동 주체도 아니다.

  앞서 TCP/IP에서 유사하다 라는 표현을 사용한 이유는 이것이 가장 정확한 표현이기 때문이다.
  왜냐면, OSI모델의 목적은 이론적 설계를 위한 참조이고, TCP/IP모델의 목적은 실용적 구현이기에
  두 모델은 별개의 목적을 가진 별개의 모델이라서 유사하다 라고 하는 것이다.

트래픽과 네트워크 성능 지표
  트래픽
    네트워크 내의 정보량을 의미한다.
    특정 노드에 트래픽이 몰린다는 것은 해당 노드가 특정시간 동안 처리해야 할 정보가
    많음을 의미하고 이 경우에 과부하가 생길 수 있다. 트래픽이 몰려 특정 노드가 과부하되면 성능 저하가 이루어질 수 있다.

  네트워크의 성능은 어떻게 평가할 수 있을까?
  - 처리율
    단위 시간당 네트워크를 통해 실제로 전송되는 정보량을 의미한다.
    비교적 실시간성이 강조된 지표로 특정 노드가 얼마만큼의 트래픽을 처리하는 중인지 판단하기 위해 사용된다.

  - 대역폭
    신호 처리 영역에서의 정의와 네트워크 성능 측정 영역에서의 정의가 서로 다르다.
    전자는 주파수의 범위 / 후자는 단위 시간 동안 통신 매체를 통해 송수신할 수 있는 최대 정보량을 의미한다.
    높은 대역폭 -> 많은 정보를 송수신할 수 있는 능력

  - 패킷 손실
    전체 패킷 중 유실된 패킷을 백분위로 표현한 값을 사용하는 경우가 많다.
    CMD / 터미널에서 ping 명령어로 확인할 수 있다.
    ping명령어는 수신지로 다수의 패킷을 전송해 수신지까지 도달 가능한지 여부를 알려준다.
    몇 개의 패킷을 송수신했는지, 몇%의 패킷이 손실되었는지 알 수 있다.



